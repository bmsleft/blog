### 目标

最近想做一些图像相关的应用研究。结合目前的工作（导航），考虑偏向于无人驾驶的研究方向。不过无人驾驶是个很大的范畴，先学习一些目前比较基础的技术吧。

车道线检测是无人驾驶领域里相对基础的需求。简单来讲，就是通过传感器或者摄像头获取前方信息，识别并标注出车道线。可以简单的概括为： 获取环境信息 -> 车道线检测 -> 标注显示

### 调研方案

按照车道线检测的实现步骤，在不同阶段有不同的方案：

1. 获取环境信息

   - 传统摄像头 （价格便宜，但受环境变化影响大）
   - 激光雷达 （价格贵，需定制。但检测精度高）

2. 车道线检测

   - 传统图像技术处理 

     这个主要是结合摄像头。Github上查看了很多开源的lane detect的项目，发现很多都是这种方案。优势么，实现方便，成本低。缺点就是精度低喽。对正常环境下的直车道线检测效果好，但是一旦环境变化或者车道线复杂弯曲情况，往往识别不出来。

   - 机器学习方法

     这个可以结合摄像头，也可以使用图像处理技术。但是，机器学习方法的缺点之一是需要大量标注样本让模型学习。不管是传统个机器学习方法还行目前流行的深度学习，都不可避免得需要前期准备大量的可靠数据。

3. 标注显示

   目前应该就是Hub抬头显示吧，在车上装个激光投影实现AR的效果 目前也不大现实吧。

### 车道检测的图像处理技术实现

下面说说目前比较成熟的通过传统的图像处理技术进行车道线检测的实现方案细节吧。
先贴一个介绍得比较详细的[blog](http://blog.csdn.net/young_gy/article/details/75194914)。总的来说，目前没有单一的检测技术，一般都是对图像进行一系列的连续处理操作。也就是说，这里将会涉及到很多个单一技术，按需组合以获得比较好的检测结果。

1. 图像预处理

   主要是图像校正。有时候，摄像头因为各种硬件因素导致照片中的物体会产生变形扭曲。因此有必要消除摄像头带来的图像失真。这里给出一个实现方案[【**摄像机标定和图像失真去除**】](http://www.atyun.com/8844_%E8%AE%A9%E8%BD%A6%E8%BE%86%E5%AD%A6%E4%BC%9A%E8%AF%86%E5%88%AB%E8%BD%A6%E9%81%93%EF%BC%9A%E4%BD%BF%E7%94%A8%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E8%BF%9B%E8%A1%8C%E8%BD%A6.html)。 主要实现是通过OpenCV的findChessboardCorners方法进行标定，计算出畸变矩阵。

2. 图像色彩处理

   这个色彩处理的目的是保证接下来的边缘检测的效果达到预期效果。简单的可以将彩色图像转换为灰度图像。或者，转换到HSL、HSV色彩空间。

3. 边缘检测

   OpenCV有个Canny的方法，原理看OpenCV的[Doc](http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_canny/py_canny.html)。

4. 限定区域 Region of Interest)

   过Canny进行边缘检测获得边缘后，会发现，获得的边缘不仅包括需要的车道线边缘，同时包括不需要的其他车道以及周围围栏的边缘。去掉这些边缘的办法是确定一个多边形的可视域，只保留可视域部分的边缘信息。其依据是camera相对车是固定的，车相对于车道的相对位置也基本固定，所以车道在camera中基本保持在一个固定区域内。

5. Hough transform

   霍夫变换一种特征提取技术，检测具有特定形状的物体，通常是直线、圆、椭圆。

   原理以及实现移步[这里](http://blog.csdn.net/walilk/article/details/76142426)。

6. 直线提取

   通过Hough变换后，得到了很多直线，很多是分段的，如何得到一整条呢？

   这里介绍一种比较简单的方法：

   1. 将所有直线按照斜率分成左右两部分。
   2. 每部分求平均或者median得到加权的直线参数。
   3. 根据原图片的位置描绘出新参数的直线。




好了，目前基本的方案就是这样。不过，图像处理的方法多种多样，可以使用别的技术例如视角变换之类，总的来说，这类方案可变性比较大，毕竟是参数模型，需要人为事先设定，因此这是个经验活。

   



